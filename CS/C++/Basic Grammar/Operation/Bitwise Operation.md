# 位运算

## 一、位运算符与功能

| 运算符  | 名称 | 功能          |            |
| ---- | -- | ----------- | ---------- |
| `~`  | 取反 | 对每一位取反      |            |
| `&`  | 与  | 两位都为 1 才为 1 |            |
| \`   | \` | 或           | 有一个 1 即为 1 |
| `^`  | 异或 | 不同为 1，相同为 0 |            |
| `<<` | 左移 | 所有位左移 n 位   |            |
| `>>` | 右移 | 所有位右移 n 位   |            |

---

## 二、基本概念

位运算是基于 **整数的二进制** 表示进行的操作，速度快、效率高，常用于底层程序设计、状态压缩等。

---

## 三、与、或、异或

### 运算规则：

| 运算 | 运算符 | 数学符号       | 解释           |
| -- | --- | ---------- | --------------- |
| 与  | `&` | `&` , `and` | 都是 1 时为 1，否则为 0 |
| 或  | `\|`  | `\|`, `or`        | 只要两位当中有一位为1就是1              |
| 异或 | `^` | `⊕` , `xor`        | 相同为 0，不同为 1    |  

### 示例：


**$$
\begin{aligned}
5 &= (101)_2 \\
6 &= (110)_2 \\
5 \& 6 &= (100)_2 = 4 \\
5 | 6 &= (111)_2 = 7 \\
5 \oplus 6 &= (011)_2 = 3
\end{aligned}
$$**


---

## 四、取反（\~）

取反是单目运算，作用是将 **补码的每一位** 取反（0 ↔ 1）。符号位也会取反，因此对有符号数的影响很大。

### 示例：

```cpp
5         = (00000101)_2
~5        = (11111010)_2 = -6

-5 的补码 = (11111011)_2
~(-5)     = (00000100)_2 = 4
```

---

## 五、左移（<<）和右移（>>）

### 定义：

* `a << n`：a 向左移动 n 位，相当于乘以 `2^n`（低位补 0）
* `a >> n`：a 向右移动 n 位，相当于除以 `2^n`（高位视符号补 0 或 1）

### 示例：

```
11 = (00001011)_2

11 << 3 = (01011000)_2 = 88
11 >> 2 = (00000010)_2 = 2
```

---

## 六、移位运算的未定义行为

以下情况会导致行为未定义：

* 右操作数（位数）为负；
* 右操作数 ≥ 左操作数的位数；
* 左移后结果超出原类型能表示的范围；
* 对负数执行左移操作。

### 示例（未定义行为）：

```cpp
int a = 1;
a << -1;  // ❌ 未定义
a << 32;  // ❌ 未定义（int 是 32 位）
```

---

## 七、右移补位规则

* **无符号数**：左边补 0；
* **有符号数**：左边补符号位（正数补 0，负数补 1）。

---

## 八、复合赋值位运算符

| 运算符   | 功能说明    |        |
| ----- | ------- | ------ |
| `&=`  | 按位与并赋值  |        |
| \`    | =\`     | 按位或并赋值 |
| `^=`  | 按位异或并赋值 |        |
| `<<=` | 左移并赋值   |        |
| `>>=` | 右移并赋值   |        |

---

## 九、优先级提示

* 位运算优先级 **低于算术运算符**；
* `~` 的优先级高，其他位运算符（&、|、^、<<、>>）优先级低；
* 必要时请使用括号明确运算顺序。

---

是否需要我将其转为 Markdown 文件或 Word 文档供你下载使用？
